<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>AR.js Example</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose@0.8.6/mediapipe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ar.js/aframe/build/aframe-ar.js"></script>
</head>
<body>
    <a-scene embedded arjs="sourceType: webcam;">

        <!-- Marker -->
        <a-marker preset="custom" type="pattern" url="marker.patt" cursor="rayOrigin: mouse;">
            <a-box position="0 0.5 0" color="red" depth="1" height="1" width="1"></a-box>
        </a-marker>

        <!-- Camera -->
        <a-entity camera></a-entity>

        <!-- Debug Cube -->
        <a-entity id="debug-cube" geometry="primitive: box; height: 1; width: 1; depth: 1;" material="color: green; opacity: 0.5;" position="0 0.5 0"></a-entity>

        <!-- Script to detect the size of the object -->
        <script>
            // Get the marker element
            const marker = document.querySelector('a-marker');

            // Get the marker's width and height
            const markerWidth = marker.getAttribute('width');
            const markerHeight = marker.getAttribute('height');

            // Get the debug cube element
            const debugCube = document.querySelector('#debug-cube');

            // Listen for marker found events
            marker.addEventListener('markerFound', () => {
                // Get the size of the object
                const objectWidth = debugCube.getAttribute('width') * (markerWidth / debugCube.object3DMap.mesh.scale.x);
                const objectHeight = debugCube.getAttribute('height') * (markerHeight / debugCube.object3DMap.mesh.scale.y);
                const objectDepth = debugCube.getAttribute('depth') * (markerWidth / debugCube.object3DMap.mesh.scale.z);

                // Log the size of the object
                console.log('Object width:', objectWidth);
                console.log('Object height:', objectHeight);
                console.log('Object depth:', objectDepth);
            });
        </script>

    </a-scene>
</body>
</html>
